{"ast":null,"code":"var _jsxFileName = \"/Users/saloniangre/Downloads/Fuelroute/FinalFRP/frontend/src/components/Subscription.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport './Subscription.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Subscription = () => {\n  _s();\n  const [currentUser, setCurrentUser] = useState(null);\n  const [cardNumber, setCardNumber] = useState('');\n  const [expiry, setExpiry] = useState('');\n  const [cvv, setCvv] = useState('');\n  const [message, setMessage] = useState('');\n  useEffect(() => {\n    const user = JSON.parse(localStorage.getItem('currentUser') || '{}');\n    setCurrentUser(user);\n  }, []);\n  const handleSubscribe = async e => {\n    e.preventDefault();\n    if (!currentUser || !currentUser.id) {\n      setMessage('Please login first.');\n      return;\n    }\n    try {\n      const res = await fetch('http://localhost:5001/api/payments', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          userId: currentUser.id,\n          cardNumber,\n          expiry,\n          cvv\n        })\n      });\n      if (!res.ok) {\n        throw new Error('Payment failed');\n      }\n      const data = await res.json();\n      if (data.success) {\n        const updatedUser = {\n          ...currentUser,\n          isSubscribed: true\n        };\n        localStorage.setItem('currentUser', JSON.stringify(updatedUser));\n        const users = JSON.parse(localStorage.getItem('fuelrouteUsers') || '[]');\n        const idx = users.findIndex(u => u.id === currentUser.id);\n        if (idx > -1) {\n          users[idx] = updatedUser;\n          localStorage.setItem('fuelrouteUsers', JSON.stringify(users));\n        }\n        setCurrentUser(updatedUser);\n        setMessage('Subscription successful! You now have unlimited searches.');\n      } else {\n        throw new Error(data.error || 'Payment failed');\n      }\n    } catch (err) {\n      console.error('Subscription error', err);\n      setMessage('Subscription failed. Please try again.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"subscription-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"subscription-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"FuelRoute Pro Subscription\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"price\",\n        children: \"$15/month\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"info\",\n        children: \"First 3 searches are free. Subscribe to continue using the calculator.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"message\",\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 21\n      }, this), currentUser !== null && currentUser !== void 0 && currentUser.isSubscribed ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"already\",\n        children: \"You are already subscribed.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubscribe,\n        className: \"subscription-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Card Number\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: cardNumber,\n            onChange: e => setCardNumber(e.target.value),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"MM/YY\",\n            value: expiry,\n            onChange: e => setExpiry(e.target.value),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"CVV\",\n            value: cvv,\n            onChange: e => setCvv(e.target.value),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"subscribe-btn\",\n          children: \"Subscribe\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"back-link\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/how-it-works\",\n          children: \"Back to Hub\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n};\n_s(Subscription, \"2WLj7aHKcJjidfW8hETn3vRQrBQ=\");\n_c = Subscription;\nexport default Subscription;\nvar _c;\n$RefreshReg$(_c, \"Subscription\");","map":{"version":3,"names":["React","useState","useEffect","Link","jsxDEV","_jsxDEV","Subscription","_s","currentUser","setCurrentUser","cardNumber","setCardNumber","expiry","setExpiry","cvv","setCvv","message","setMessage","user","JSON","parse","localStorage","getItem","handleSubscribe","e","preventDefault","id","res","fetch","method","headers","body","stringify","userId","ok","Error","data","json","success","updatedUser","isSubscribed","setItem","users","idx","findIndex","u","error","err","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","value","onChange","target","required","placeholder","to","_c","$RefreshReg$"],"sources":["/Users/saloniangre/Downloads/Fuelroute/FinalFRP/frontend/src/components/Subscription.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport './Subscription.css';\n\nconst Subscription = () => {\n  const [currentUser, setCurrentUser] = useState(null);\n  const [cardNumber, setCardNumber] = useState('');\n  const [expiry, setExpiry] = useState('');\n  const [cvv, setCvv] = useState('');\n  const [message, setMessage] = useState('');\n\n  useEffect(() => {\n    const user = JSON.parse(localStorage.getItem('currentUser') || '{}');\n    setCurrentUser(user);\n  }, []);\n\n  const handleSubscribe = async (e) => {\n    e.preventDefault();\n    if (!currentUser || !currentUser.id) {\n      setMessage('Please login first.');\n      return;\n    }\n\n    try {\n      const res = await fetch('http://localhost:5001/api/payments', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          userId: currentUser.id,\n          cardNumber,\n          expiry,\n          cvv\n        })\n      });\n\n      if (!res.ok) {\n        throw new Error('Payment failed');\n      }\n\n      const data = await res.json();\n      if (data.success) {\n        const updatedUser = { ...currentUser, isSubscribed: true };\n        localStorage.setItem('currentUser', JSON.stringify(updatedUser));\n\n        const users = JSON.parse(localStorage.getItem('fuelrouteUsers') || '[]');\n        const idx = users.findIndex((u) => u.id === currentUser.id);\n        if (idx > -1) {\n          users[idx] = updatedUser;\n          localStorage.setItem('fuelrouteUsers', JSON.stringify(users));\n        }\n        setCurrentUser(updatedUser);\n        setMessage('Subscription successful! You now have unlimited searches.');\n      } else {\n        throw new Error(data.error || 'Payment failed');\n      }\n    } catch (err) {\n      console.error('Subscription error', err);\n      setMessage('Subscription failed. Please try again.');\n    }\n  };\n\n  return (\n    <div className=\"subscription-container\">\n      <div className=\"subscription-card\">\n        <h1>FuelRoute Pro Subscription</h1>\n        <p className=\"price\">$15/month</p>\n        <p className=\"info\">First 3 searches are free. Subscribe to continue using the calculator.</p>\n        {message && <div className=\"message\">{message}</div>}\n        {currentUser?.isSubscribed ? (\n          <div className=\"already\">You are already subscribed.</div>\n        ) : (\n          <form onSubmit={handleSubscribe} className=\"subscription-form\">\n            <div className=\"form-group\">\n              <label>Card Number</label>\n              <input\n                type=\"text\"\n                value={cardNumber}\n                onChange={(e) => setCardNumber(e.target.value)}\n                required\n              />\n            </div>\n            <div className=\"form-row\">\n              <input\n                type=\"text\"\n                placeholder=\"MM/YY\"\n                value={expiry}\n                onChange={(e) => setExpiry(e.target.value)}\n                required\n              />\n              <input\n                type=\"text\"\n                placeholder=\"CVV\"\n                value={cvv}\n                onChange={(e) => setCvv(e.target.value)}\n                required\n              />\n            </div>\n            <button type=\"submit\" className=\"subscribe-btn\">Subscribe</button>\n          </form>\n        )}\n        <div className=\"back-link\">\n          <Link to=\"/how-it-works\">Back to Hub</Link>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Subscription;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}